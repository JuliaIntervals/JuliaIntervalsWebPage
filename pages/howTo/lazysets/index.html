<!doctype html> <!-- Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes Free for personal and commercial use under the MIT license https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE --> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <meta name=description  content="Interval computations with Julia" /> <!-- og tags--> <meta property="og:site_name" content=JuliaIntervals  /> <meta property="og:type" content=website  /> <meta property="og:title" content=JuliaIntervals  /> <meta property="og:description" content="Interval computations with Julia" /> <meta property="og:url" content="https://juliaintervals.github.io/" /> <meta property="og:image" content="https://raw.githubusercontent.com/JuliaIntervals/juliaintervals.github.io/master/_assets/juliaintervals-logoTest.png" /> <meta property="og:image:type" content="image/png" /> <meta property="og:image:width" content=860  /> <meta property="og:image:height" content=860  /> <meta name=thumbnail  content="https://raw.githubusercontent.com/JuliaIntervals/juliaintervals.github.io/master/_assets/juliaintervals-logoTest.svg" /> <link rel=stylesheet  href="/libs/katex/katex.min.css"> <link rel=stylesheet  href="/libs/highlight/atom-one-dark.css"> <style> .hljs td { border-bottom: none; padding-bottom: 0em !important; padding-left: 0.5em !important; padding-right: 0.5em !important; padding-top: 0.2em !important;} </style> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/minimal-mistakes.css"> <link rel=stylesheet  href="/css/adjust.css"> <link rel=stylesheet  href="/css/sidebar.css"> <link rel=stylesheet  href="/css/documentation.css"> <link rel=icon  href="/assets/juliaintervals-logoTest.svg"> <!--[if IE ]> <style> /* old IE unsupported flexbox fixes */ .greedy-nav .site-title { padding-right: 3em; } .greedy-nav button { position: absolute; top: 0; right: 0; height: 100%; } </style> <![endif]--> <title>Polyhedral approximations with LazySets</title> <script src="/libs/lunr/lunr.min.js"></script> <script src="/libs/lunr/lunr_index.js"></script> <script src="/libs/lunr/lunrclient.min.js"></script> <body class=layout--single > <div class="masthead sticky"> <div class=masthead__inner-wrap > <div class=masthead__menu > <nav id=site-nav  class=greedy-nav > <a class=site-logo  href="/"><img src="/assets/juliaintervals-lockupTest.svg" alt="julia logo"></a> <form id=lunrSearchForm  name=lunrSearchForm > <input class=search-input  name=q  placeholder="Enter search term" type=text  > <input type=submit  class=search-button  value=Search  formaction="/search/index.html" > </form> <ul class=visible-links > <li class=masthead__menu-item ><a href="/pages/packages/">Packages</a> <li class=masthead__menu-item ><a href="/pages/tutorials/" >Tutorials</a> <li class=masthead__menu-item ><a href="/pages/howTo/" >Applications</a> <li class=masthead__menu-item ><a href="/pages/explanations/" >Explanations</a> <li class=masthead__menu-item ><a href="/pages/apiDocs/">API docs</a> </ul> <button class="greedy-nav__toggle hidden" type=button > <span class=visually-hidden >Toggle menu</span> <div class=navicon ></div> </button> <ul class="hidden-links hidden"></ul> </nav> </div> </div> </div> <div class=initial-content > <div id=main  role=main > <div class="sidebar sticky"> <div itemscope itemtype="https://schema.org/Person"> <h3><label for=show-menu  class=show-menu >Index</label></h3> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <h2 class=sidebar-title ><a href="/pages/howTo" class=sidebar-link >Applications</a></h2> <ul class=menu-list > <li class="menu-list-item "><a href="/pages/howTo/rigorousPi" class="menu-list-link ">Rigorous approximation of π</a> <li class="menu-list-item "><a href="/pages/howTo/funcRange" class="menu-list-link ">Rigorous computation of function range</a> <li class="menu-list-item active"><a href="/pages/howTo/lazysets" class="menu-list-link active">Polyhedral approximations with LazySets</a> </ul></div> <a href="#" class="btn btn--primary top-btn">top</a> </div> </div> <div class=franklin-content ><h1 id=polyhedral_approximations_with_lazysets ><a href="#polyhedral_approximations_with_lazysets" class=header-anchor >Polyhedral approximations with LazySets</a></h1></p> <p>Download the <a href="/notebooks/howTo/lazysets.ipynb">notebook</a> for this tutorial.</p> <p><p>In the <a href="/pages/tutorials/tutorialConstraintProgramming">IntervalConstraintProgramming</a> tutorial we saw how to solve the <em>set inversion</em> problem, i.e. how to find the region in <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant=double-struck >R</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^n</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68889em;vertical-align:0em;"></span><span class=mord ><span class=mord ><span class="mord mathbb">R</span></span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span> that satisfies a set of constraints.</p> <p>Interval constraint programming uses interval boxes. However, if the region we want to approximate is not box-shaped, it will require a large number of boxes to be represented accurately. To operate with those regions, it is practical to simplify such union of boxes with another set representation, hopefully without information loss, i.e. minimizing the <em>overapproximation error</em>.</p> <p>The package <a href=" https://github.com/JuliaReach/LazySets.jl/" target=_blank > LazySets.jl</a> can be used to approximate regions returned by <code>IntervalConstraintProgramming.jl</code> using general set types such as <a href=" https://en.wikipedia.org/wiki/Polyhedron" target=_blank > polyhedra</a>, that is, finite intersections of half-spaces. More generally, unions of polyhedra can be used if the region is not convex.</p> <p>First let us import the packages we need</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> IntervalArithmetic, IntervalConstraintProgramming, LazySets, Plots</code></pre>
<p>The overapproximation of a paving using a polyhedron in constraint representation &#40; <a href=" https://juliareach.github.io/LazySets.jl/dev/lib/sets/HPolyhedron/" target=_blank > HPolyhedron</a>&#41; with constraints in the given directions <code>dirs</code> can be computed with the <code>overapproximate&#40;::Paving, dirs::AbstractDirections&#41;</code> function as illustrated below.</p>
<pre><code class="julia hljs">S = <span class=hljs-meta >@constraint</span> x^<span class=hljs-number >2</span>+y^<span class=hljs-number >2</span> + <span class=hljs-number >3</span>*sin(x) + <span class=hljs-number >5</span>*sin(y) &lt;= <span class=hljs-number >1.0</span>

X = IntervalBox(-<span class=hljs-number >10.</span><span class=hljs-number >.10</span>, <span class=hljs-number >2</span>) <span class=hljs-comment ># our starting box</span>
paving = pave(S, X, <span class=hljs-number >0.02</span>)</code></pre><pre><code class="plaintext hljs">Paving:
- tolerance ϵ = 0.02
- inner approx. of length 1310
- boundary approx. of length 835</code></pre>
<p>We will choose octagon directions, meaning that the directions normal to the overapproximating polyhedron are parallel to those of an octagon &#40;this method is not restricted to two dimensions&#41;:</p>
<pre><code class="julia hljs">Xoct = overapproximate(paving, OctDirections(<span class=hljs-number >2</span>))

plot(Xoct, lab=<span class=hljs-string >&quot;Octagon&quot;</span>, alpha=<span class=hljs-number >.5</span>, c=:orange)
plot!(paving.inner, c=<span class=hljs-string >&quot;green&quot;</span>, aspect_ratio=:equal, label=<span class=hljs-string >&quot;inner&quot;</span>)
plot!(paving.boundary, c=<span class=hljs-string >&quot;gray&quot;</span>, label=<span class=hljs-string >&quot;boundary&quot;</span>)</code></pre>
<img src="/assets/pages/howTo/lazysets/code/output/pavingPolyhedral.svg" alt="">
<p>The function <code>overapproximate</code> considers the union of the elements in the boundary of the paving and then computes the support function of the such union along each chosen direction, obtaining the corresponding polyhedron in constraint form. In this example we have picked octagonal directions, but specifying other sets of directions is also possible &#40;see <a href="https://juliareach.github.io/LazySets.jl/dev/lib/approximations/#Template-directions">the documentation</a> for details&#41;.</p>
<p>When no directions are known a priori, we can also let the algorithm choose the directions by an iterative refinement process of the given tolerance <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> &#40;this method only works in two dimensions&#41;. First we construct <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>, the &#40;lazy&#41; convex hull of the paving&#39;s boundary, then we overapproximate it using polygons:</p>
<pre><code class="julia hljs">Y = ConvexHullArray(convert.(Hyperrectangle, paving.boundary))

Xpoly = overapproximate(Y, <span class=hljs-number >0.1</span>)
Xpoly′ = overapproximate(Y, <span class=hljs-number >0.01</span>)

plot(Xoct, lab=<span class=hljs-string >&quot;Octagon&quot;</span>, alpha=<span class=hljs-number >.5</span>, c=:orange, legend=:bottomright)

plot!(Xpoly, lab=<span class=hljs-string >&quot;Polygon, ε=0.1&quot;</span>)
plot!(Xpoly′, lab=<span class=hljs-string >&quot;Polygon, ε=0.01&quot;</span>, alpha=<span class=hljs-number >1.</span>)

plot!(paving.boundary, lab=<span class=hljs-string >&quot;Paving (boundary)&quot;</span>, c=:lightblue)
plot!(paving.inner, lab=<span class=hljs-string >&quot;Paving (inner)&quot;</span>, c=:yellow)

lens!([<span class=hljs-number >0.0</span>, <span class=hljs-number >0.3</span>], [<span class=hljs-number >0.0</span>, <span class=hljs-number >0.3</span>], inset = (<span class=hljs-number >1</span>, bbox(<span class=hljs-number >0.25</span>, <span class=hljs-number >0.35</span>, <span class=hljs-number >0.4</span>, <span class=hljs-number >0.4</span>)))</code></pre>
<img src="/assets/pages/howTo/lazysets/code/output/pavingPolyhedralRefined.svg" alt="">
<p>To conclude, we note that in all cases considered the number of initial boxes is much larger than the complexity of the approximation if we measure it in terms of the number of constraints:</p>
<pre><code class="julia hljs">length(paving.inner) + length(paving.boundary)</code></pre><pre><code class="plaintext hljs">2145</code></pre>
<pre><code class="julia hljs">length(Xoct.constraints)</code></pre><pre><code class="plaintext hljs">8</code></pre>
<pre><code class="julia hljs">length(Xpoly.constraints)</code></pre><pre><code class="plaintext hljs">16</code></pre>
<pre><code class="julia hljs">length(Xpoly′.constraints)</code></pre><pre><code class="plaintext hljs">54</code></pre>

<div class=page-foot >
  <div class=copyright >
    &copy; JuliaIntervals. Last modified: March 05, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>.
  </div>
</div>
</div>

      </div> 
    </div>   

    <div class=page__footer >
      <footer>
        
        
        <div class=page__footer-follow >
          <ul class=social-icons >
            <li><strong>Follow:</strong>
            <li><a href="https://github.com/JuliaIntervals" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden=true ></i> GitHub</a>
          </ul>
        </div>
        <div class=page__footer-copyright >&copy; JuliaIntervals. Powered by <a href="https://github.com/tlienart/Franklin.jl">Franklin</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel=nofollow >Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="/libs/minimal-mistakes/main.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin=anonymous ></script>